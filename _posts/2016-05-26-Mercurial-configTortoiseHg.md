---
layout: post
title:  "如何让TortoiseHg 记住用户名和密码"
date:   2016-05-26 17:24:00
categories: Mercurial
author: eli
tags: Mercurial hg TortoiseHg
excerpt: TortoiseHg 常常用来操作 Mercurial，个人感觉要比sourcetree好用。本文记录了几种 免输密码的方式。
---
* content
{:toc}  

>在你clone了仓库之后，在你本地的目录会生成这样一个文件夹 **.hg**,还有一个 **hgrc** 文件。它们通常会这样配置：

```xml
[paths]
default = https://eli_lee@bitbucket.org/xxx/xxx
[ui]
username = Eli Li <elili@xxx.com>
```

#### 当你进行pull或者push操作的时候，username会从 **pahts** 取得，但是仍会让你输入密码，就像这样

![tortoisehg1](https://raw.githubusercontent.com/levioZ/levioZ.github.io/master/images/tortoisehg1.png)

####  有一种简单的解决方式  

![tortoisehg](https://raw.githubusercontent.com/levioZ/levioZ.github.io/master/images/tortoisehg.png)

>但是这样做有一个问题。TortoiseHg 将会在你的系统目录里创建一个文件 **mercurial.ini** 密码将会已明文的方式存储在这里。

```xml
# Generated by TortoiseHg settings dialog
[ui]
username = Eli Li <elili@xxx.com>

[auth]
bitbucket.org.prefix = bitbucket.org
bitbucket.org.username = myusername
bitbucket.org.password = mypassword

```

有一种办法可以解决这个问题，就是在**mercurial.ini**中添加 **Keyring**  extension  

```xml

[extensions]
mercurial_keyring=

```
这个时候你可以删除 **[auth]** 中的password了

```xml
# Generated by TortoiseHg settings dialog
[ui]
username = Eli Li <elili@xxx.com>
[auth]
bitbucket.org.prefix = bitbucket.org
bitbucket.org.username = myusername

[extensions]
mercurial_keyring=

```
**hgrc** 文件中的 username也不需要了

```xml

[paths]
default = https://bitbucket.org/xxx/xxx
[ui]
username = Eli Li <elili@xxx.com>

```

>现在你的password存储在 **keyring** 中，而你的username存储在 **mercurial.ini** 中

**notice：**  TortoiseHg 可能还是会让你输几次密码，这样才会把密码存储在keyring中。
